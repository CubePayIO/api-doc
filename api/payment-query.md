# payment/query

> Query payment information by specific identity.
>
> It is useful for checking order progress or double confirm the finishd order.

Payment Status define as

| Status code | Status message |
| :--- | :--- |
| -1 | canceled |
| 0 | init |
| 1 | paying |
| 2 | paid |
| 3 | cryptocurrency sended |
| 4 | completed |
| 5 | refunding |
| 6 | refunded |

{% api-method method="post" host="API\_URL" path="/payment/query" %}
{% api-method-summary %}
Query payment information
{% endapi-method-summary %}

{% api-method-description %}
**Request**  
  
parameter _`id`_ or _`merchant_transaction`_ must required at least one.  
  
**Response**  
  
`id` : CubePay payment ID.   
  
`status` : Payment status code.   
  
`status_meaasge` : Payment status message.  
  
`pay_url` : You can redirect customer to this URL for payment, the page content a blockchain address, QR   
  
                     code, price and other item info, or display the _`address`_ and _`qrcode`_and _`amount`_ on your     
  
                     customize way. If the payment is finish, it will show invoice info.  
  
`pay_info` : \[_Object_ \]  
  
 {  
  
      `coin` : \[Object\] Coin you will receive.  
__       
       {  
  
               __`id` : Identity of coin.   
  
               `symbol` : Symbol of coin.   
  
               `name` : Coin name.   
  
               `image` : Coin image \(64 pixel \* 64 pixel\)   
  
               `description` : Description of coin.  
       }  
                      
      `address` : The blockchain address for the payment, you can lead your customer pay coin to the   
  
                         address.  
  
      `qrcode` : QR cod of blockchain address for the payment.  
  
      `amount` : The amount should be pay for the payment.  
  
      `paid_amount` : Amount has been paid of the payment.  
  
       `merchant_transaction_id` :   
  
       `item_name` : Customize name of your item.  
  
       `source_coin` : \[Object\] Source Coin of your original list price.  
  
         {   
                  `id` : Identity of coin.   
  
                  `symbol` : Symbol of coin.   
  
                  `name` : Coin name.   
  
                  `image` : Coin image \(64 pixel \* 64 pixel\)   
  
                  `description` : Description of coin.   
         }  
  
        `source_amount` :  original list price of your price.  
  
        `rate` : currency exchange rate between `coin` and `source_coin` , _rate = coin / source\_coin_    
  
        `send_coin` : \[Object\] The coin send back to your customer.  
               
        {  
  
                    `id` : Identity of coin.   
  
                    `symbol` : Symbol of coin.   
  
                    `name` : Coin name.   
  
                    `image` : Coin image \(64 pixel \* 64 pixel\)   
  
                    `description` : Description of coin.   
  
         }  
  
        `send_amount` : Coin address send back to your customer.  
  
        `receive_address` : Coin address send back to your customer.  
  
}  
  
`refund_info` : \[Object\] If the payment has finish and refund, response the refund info.  
  
{  
        `amount` : Amount of refund.  
  
        `to_address` : Address of refund to.  
  
}  
  
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-form-data-parameters %}
{% api-method-parameter name="id" type="string" required=false %}
CubePay payment ID
{% endapi-method-parameter %}

{% api-method-parameter name="merchant\_transaction\_id" type="string" required=false %}
Transaction ID generated by your shop.  
  
If your transaction is not unique, it'll return the last one record.
{% endapi-method-parameter %}

{% api-method-parameter name="client\_id" type="string" required=true %}
Client ID of the merchant.
{% endapi-method-parameter %}

{% api-method-parameter name="sign" type="string" required=true %}
Sign string hash by client\_id and other parameters.
{% endapi-method-parameter %}
{% endapi-method-form-data-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```javascript
{
    "data": [
        {
            "id": "C1536292666260718848",
            "status": 6,
            "status_message": "Refunded",
            "pay_url": "http://cubepay.io/payment/pay?id=C1536292666260718848",
            "pay_info": {
                "coin": {
                    "id": 3,
                    "symbol": "USDT",
                    "name": "USDT",
                    "image": "http://common.cubepay.io/uploads/coin/1534500017.png",
                    "description": "USDT"
                },
                "address": "0x08ab6fed4cc9780a383f36ce3f166db6fd0aa910",
                "qrcode": "http://common.cubepay.io/tool/qrcode/0x08ab6fed4cc9780a383f36ce3f166db6fd0aa910.png",
                "amount": 100,
                "paid_amount": 100,
                "merchant_transaction_id": "1536292098",
                "item_name": "Test item name",
                "source_coin": {
                    "id": 3,
                    "symbol": "USDT",
                    "name": "USDT",
                    "image": "http://common.cubepay.io/uploads/coin/1534500017.png",
                    "description": "USDT"
                },
                "source_amount": 100,
                "rate": 1,
                "send_coin": {
                    "id": 502,
                    "symbol": "TOKEN1",
                    "name": "Token1 Test",
                    "image": "http://common.cubepay.io/images/coin.png",
                    "description": "TOKEN1"
                },
                "send_amount": 5000,
                "receive_address": "0x5A0DA1fD7f6b084A81F07fb9d641D295b2E7e669"
            },
            "refund_info": {
                "amount": "89.700000",
                "to_address": "0x5A0DA1fD7f6b084A81F07fb9d641D295b2E7e669"
            }
        }
    ],
    "status": 200
}
```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}


